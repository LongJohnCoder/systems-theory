<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>blk_queue_make_request</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="The Linux Kernel API"
HREF="index.html"><LINK
REL="UP"
TITLE="Block Devices"
HREF="c11635.html"><LINK
REL="PREVIOUS"
TITLE="blk_queue_merge_bvec"
HREF="r11670.html"><LINK
REL="NEXT"
TITLE="blk_queue_bounce_limit"
HREF="r11743.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The Linux Kernel API</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="r11670.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="r11743.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="AEN11703"
></A
><SPAN
CLASS="phrase"
><SPAN
CLASS="PHRASE"
>blk_queue_make_request</SPAN
></SPAN
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN11707"
></A
><H2
>Name</H2
>blk_queue_make_request&nbsp;--&nbsp;      define an alternate make_request function for a device
 </DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN11710"
></A
><H2
>Synopsis</H2
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><A
NAME="AEN11712"
></A
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void blk_queue_make_request </CODE
>(request_queue_t * q, make_request_fn * mfn);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN11720"
></A
><H2
>Arguments</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><VAR
CLASS="PARAMETER"
>q</VAR
></DT
><DD
><P
>       the request queue for the device to be affected
    </P
></DD
><DT
><VAR
CLASS="PARAMETER"
>mfn</VAR
></DT
><DD
><P
>      the alternate make_request function
    </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN11733"
></A
><H2
>Description</H2
><P
>   The normal way for &amp;struct bios to be passed to a device
   driver is for them to be collected into requests on a request
   queue, and then to allow the device driver to select requests
   off that queue when it is ready.  This works well for many block
   devices. However some block devices (typically virtual devices
   such as md or lvm) do not benefit from the processing on the
   request queue, and are served best by having the requests passed
   directly to them.  This can be achieved by providing a function
   to <CODE
CLASS="FUNCTION"
>blk_queue_make_request</CODE
>.
 </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN11737"
></A
><H2
>Caveat</H2
><P
>   The driver that does this *must* be able to deal appropriately
   with buffers in <SPAN
CLASS="QUOTE"
>"highmemory"</SPAN
>. This can be accomplished by either calling
   <CODE
CLASS="FUNCTION"
>__bio_kmap_atomic</CODE
> to get a temporary kernel mapping, or by calling
   <CODE
CLASS="FUNCTION"
>blk_queue_bounce</CODE
> to create a buffer in normal memory.
 </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="r11670.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="r11743.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><SPAN
CLASS="phrase"
><SPAN
CLASS="PHRASE"
>blk_queue_merge_bvec</SPAN
></SPAN
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c11635.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><SPAN
CLASS="phrase"
><SPAN
CLASS="PHRASE"
>blk_queue_bounce_limit</SPAN
></SPAN
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>