<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>blk_insert_request</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="The Linux Kernel API"
HREF="index.html"><LINK
REL="UP"
TITLE="Block Devices"
HREF="c11635.html"><LINK
REL="PREVIOUS"
TITLE="blk_requeue_request"
HREF="r12426.html"><LINK
REL="NEXT"
TITLE="blk_congestion_wait"
HREF="r12514.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The Linux Kernel API</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="r12426.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="r12514.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="AEN12459"
></A
><SPAN
CLASS="phrase"
><SPAN
CLASS="PHRASE"
>blk_insert_request</SPAN
></SPAN
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN12463"
></A
><H2
>Name</H2
>blk_insert_request&nbsp;--&nbsp;      insert a special request in to a request queue
 </DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN12466"
></A
><H2
>Synopsis</H2
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><A
NAME="AEN12468"
></A
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void blk_insert_request </CODE
>(request_queue_t * q, struct request * rq, int at_head, void * data, int reinsert);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN12482"
></A
><H2
>Arguments</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><VAR
CLASS="PARAMETER"
>q</VAR
></DT
><DD
><P
>     		request queue where request should be inserted
    </P
></DD
><DT
><VAR
CLASS="PARAMETER"
>rq</VAR
></DT
><DD
><P
>     		request to be inserted
    </P
></DD
><DT
><VAR
CLASS="PARAMETER"
>at_head</VAR
></DT
><DD
><P
>     	insert request at head or tail of queue
    </P
></DD
><DT
><VAR
CLASS="PARAMETER"
>data</VAR
></DT
><DD
><P
>     	private data
    </P
></DD
><DT
><VAR
CLASS="PARAMETER"
>reinsert</VAR
></DT
><DD
><P
>     	true if request it a reinsertion of previously processed one
    </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN12510"
></A
><H2
>Description</H2
><P
>   Many block devices need to execute commands asynchronously, so they don't
   block the whole kernel from preemption during request execution.  This is
   accomplished normally by inserting aritficial requests tagged as
   REQ_SPECIAL in to the corresponding request queue, and letting them be
   scheduled for actual execution by the request queue.
   </P
><P
>&#13;   We have the option of inserting the head or the tail of the queue.
   Typically we use the tail for new ioctls and so forth.  We use the head
   of the queue for things like a QUEUE_FULL message from a device, or a
   host that is unable to accept a particular command.
 </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="r12426.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="r12514.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><SPAN
CLASS="phrase"
><SPAN
CLASS="PHRASE"
>blk_requeue_request</SPAN
></SPAN
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c11635.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><SPAN
CLASS="phrase"
><SPAN
CLASS="PHRASE"
>blk_congestion_wait</SPAN
></SPAN
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>